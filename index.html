<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>算利息</title>
	</head>
	<body>
	</body>
	<script type="text/javascript">
		function add(arr) {
			let money = 0
			const end = new Date().getTime()
			const day = 60 * 60 * 24 * 1000
			arr.forEach(item => {
				const start = new Date(item.date + ' 00:00').getTime()
				const n = Math.ceil((end > start ? end - start : 0) / day)
				money += n * item.price
				console.log('n', n, money)
			})
			const n = data.reduce((total, item) => {
				if (typeof total === 'object') {
					total = total.price
				}
				return total + item.price
			})
			console.log('money', n / 3, money)
			return `共借 ${n / 3}万，总利息 ${money}元`
		}
		const data = [{
			date: '2020-03-08',
			price: 9
		}, {
			date: '2020-03-25',
			price: 3
		}, {
			date: '2020-04-15',
			price: 3
		}, {
			date: '2020-04-25',
			price: 3
		}, {
			date: '2020-05-02',
			price: -6
		}, {
			date: '2020-05-14',
			price: 3
		}, {
			date: '2020-05-15',
			price: 3
		}, {
			date: '2020-07-04',
			price: -3
		}, {
			date: '2020-07-20',
			price: 3
		}, {
			date: '2020-08-01',
			price: 15
		}, {
			date: '2020-08-08',
			price: -6
		}, {
			date: '2020-08-21',
			price: 3
		}, {
			date: '2020-08-30',
			price: 3
		}, {
			date: '2020-09-02',
			price: -6
		}, {
			date: '2020-09-03',
			price: -3
		}, {
			date: '2020-09-04',
			price: -3
		}]
		document.write(add(data))
	</script>
</html>
